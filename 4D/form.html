<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="style.css">
	<title>Borang Pendaftaran</title>
</head>
<body>
	<h2>Borang Pendaftaran</h2>

<form action="https://dev.jtmkpsp.my/process.php" method="POST" enctype="multipart/form-data">
	<p>
		<label for="nama">Nama Peserta : </label>
		<input type="text" name="nama" id="nama">
	</p>

	<p>
		<label for="nama">Nombor Kad Pengenalan : </label>
		<input type="text" name="nric" id="nric">


		<input type="button" value="demo" onclick="myFunction()">
	<input type="button" value="Jana Maklumat Peribadi" onclick="generatePersonalInfo()"> 
	
	</p>

	<p>
		<label for="nama">Tarikh Lahir : </label>
		<input type="date" name="tarikhlahir" id="tarikhlahir">
		<span id="outPutTarikhLahir"></span>
	</p>

	<p>
		<label for "umur">Umur : </label>
		<input type="text" name="umur" id="umur">
	</p>

	<p>
		<label for="Jantina">Jantina : </label>
		<input type="radio" name="jantina" id="Lelaki" value="Lelaki">Lelaki
		<input type="radio" name="jantina" id="Perempuan" value="Perempuan">Perempuan
	</p>

	<p>
		<label for="emel">Email : </label>
		<input type="email" name="email" id="email">
	</p>

	<p> 
		<label for="phone">Nombor Telefon : </label>
		<input type="text" name="nombor_telefon" id="nombor_telefon">
	</p>

	<p>
		<label for="address">Alamat Rumah : </label>
		<textarea name="address" id="address"></textarea>
	</p>

	<p>
<label for="status_pelajar">Status Pelajar : </label>
<select name="status" id="status">
	<option value="">-- Sila Pilih -- </option>
	<option value="Aktif">Aktif</option>
	<option value="Tidak Aktif">Tidak Aktif</option>
</select>
	</p>




	<p>
		<label for="skill">Kemahiran : </label>
		<input type="checkbox" name="skill[]" id="skill[]" value="HTML">HTML

		<input type="checkbox" name="skill[]" id="skill[]" value="CSS">CSS

		<input type="checkbox" name="skill[]" id="skill[]" value="PHP">PHP
	</p>

	<p>
		<label for="dp">Gambar Profile</label>
		<input type="file" name="gambar_profile" id="gambar_profile">
	</p>

	<input type="hidden" name="roles" id="roles" value="admin">

	<p>
		<label for="katalaluan">Kata Laluan</label>
		<input type="password" name="katalaluan" id="katalaluan">
	</p>

	<p>
		<button type="submit">Hantar</button> &nbsp;
		<button type="reset">Kosongkan</button>
		<input type="button" value="Validate" onclick="formValidation()"> 

	</p>
</form>
</body>

<script>
	function myFunction() {
		var txt;
		if (confirm("Are you sure to submit the form") == true) {
			txt = "<b>You pressed OK!<b> <br><table border='2'><tr><td>1</td><td>2</td></tr></table>";
		} else {
			txt = "You pressed Cancel!";
		}
		document.getElementById("demo").innerHTML = txt;
	}

	function checkDob(nric) {

	const birthYear = nric.substr(0, 2);
    const birthMonth = nric.substr(2, 2);
    const birthDay = nric.substr(4, 2);
	
	const firstDigit = parseInt(nric.charAt(0));
	let fullyear;
	if (firstDigit == 0) {
		fullyear = "20";
	} else {
		fullyear = "19";
	}
	let fullbirthYear = fullyear + birthYear;
	console.log(fullbirthYear);
    // Combine the century, year, month, and day to form the date of birth
    const dob = new Date(`${fullbirthYear}`, birthMonth - 1, birthDay);
	document.getElementById("outPutTarikhLahir").innerHTML = dob.toDateString();
	
   const dob2 = new Date(birthYear, birthMonth - 1, birthDay);
   const options = { year: 'numeric', month: '2-digit', day: '2-digit' };
   const formattedDob = dob2.toLocaleDateString('en-CA', options);

   document.getElementById("tarikhlahir").value = formattedDob;

   let currentDate = new Date();
   let umur = currentDate.getFullYear() - fullbirthYear;
   document.getElementById("umur").value = umur;
  
}


	function checkGender(nric) {
		const checkNRIC = parseInt(nric.charAt(11));
		const checkNRIC2 = nric.substr(11,1);

		if (checkNRIC % 2 === 0) {
			jantina = 'Perempuan';
		} else {
			jantina = 'Lelaki';
		}

		autoSelectGender(jantina);

	}
	function autoSelectGender(gender) {
        
        const lelakiRB = document.getElementById('Lelaki');
        const perempuanRB = document.getElementById('Perempuan');

       
        if (gender === 'Lelaki') {
            lelakiRB.checked = true;
        } else if (gender === 'Perempuan') {
            perempuanRB.checked = true;
        }
    }

	function checkStr() {
		let string = "POLITEKNIK SEBERANG PERAI";
		let p = string.substr(0,1);
		let s = string.substr(11,1);
		let perai = string.substr(20,1);

		console.log(p);
		console.log(s);
		console.log(perai);
	}

	function generatePersonalInfo() {
		let nric = document.getElementById("nric").value;
		checkDob(nric);
		checkGender(nric);

	}
</script>
	
</html>